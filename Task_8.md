> Ты послушал доклад Геннадия Мухамедзянова «Автоматизация работы с SIEM: как наша библиотека mpsiemlib живет в SOC». Вопросы посвящены важным аспектам работы инженера SOC: работе с сетевыми портами и протоколами доставки логов, выстраивании архитектуры системы безопасности и диагностике проблем с доставкой данных.
>
> Ответь на них все!
___
## Инженер SOC - это звучит гордо
### 1
> Какова основная роль системы rsyslog в инфраструктуре SOC?
- [ ] Обеспечение автоматического реагирования на инциденты безопасности
- [x] Централизованный сбор, фильтрация и маршрутизация системных логов
- [ ] Обеспечение шифрования данных в сети
- [ ] Анализ уязвимостей сети

*Rsyslog применяется на Linux/Unix -системах для того, чтобы собирать логи из разных источников, фильтровать их и направлять в нужные места. Для шифрования данных rsyslog использовать можно — но это не ее основная функция. Что касается реагирования на инциденты и анализа уязвимостей, их обеспечивают другие средства защиты.*

### 2
> Чем syslog-ng отличается от классического syslog?
- [ ] При каждом использовании нужна сложная настройка
- [ ] Можно отправлять логи без хранения на сервере
- [ ] Поддерживаются только Windows-системы
- [x] Поддерживаются шифрование и разные форматы данных, возможна расширенная фильтрация и маршрутизация логов

*Syslog-ng предлагает расширенные возможности по сравнению с классическим syslog: шифрование передаваемых данных (например, через TLS), гибкую маршрутизацию логов по правилам, поддержку разных форматов данных.*

### 3
> Какие протоколы используют rsyslog или syslog-ng для передачи логов?
- [ ] FTP и HTTP
- [ ] SSH (для защищенной передачи)
- [x] UDP, TCP и TLS (для защищенной передачи)
- [ ] ICMP

*Syslog-ng предлагает расширенные возможности по сравнению с классическим syslog: шифрование передаваемых данных (например, через TLS), гибкую маршрутизацию логов по правилам, поддержку разных форматов данных.*

### 4
> Что нужно проверить при отсутствии логов на сервере сбора?
- [ ] Версия операционной системы сервера
- [ ] Наличие обновлений драйверов видеокарты
- [ ] Настройки времени в BIOS
- [x] Правильность настроек источника логов (IP-адреса, порты), наличие правил брандмауэра или ACL

*Самая вероятная причина отсутствия логов — неправильная настройка источника или блокировка трафика брандмауэром/ACLs. Остальные параметры редко влияют на доставку логов напрямую*

### 5
> Какие инструменты можно использовать для диагностики проблем с доставкой логов? Выбери несколько вариантов ответа.
- [X] tcpdump или Wireshark — анализ сетевого трафика
- [X] netstat — проверка открытых портов
- [X] systemctl status rsyslog или systemctl status syslog-ng — проверка состояния службы
- [X] ping — проверка доступности сервера

*Все эти инструменты помогают диагностировать проблему: tcpdump и Wireshark позволяют видеть трафик; netstat показывает открытые порты; systemctl помогает понять состояние службы; ping проверяет доступность сервера по сети*

### 6
> Какие меры помогут обеспечить надежную доставку логов в системе SIEM? Выбери несколько вариантов ответа.
- [X] Использование протокола TCP для передачи логов
- [X] Настройка подтверждения получения (ACK) в протоколе передачи логов
- [X] Применение резервных каналов связи или репликации данных
- [ ] Использование протокола UDP для передачи логов

*Все меры кроме ответа D работают на нужный нам результат. Протокол TCP обеспечивает надежность доставки, подтверждение получения помогает убедиться, что лог достиг цели, а применение резервных каналов позволяет избежать потери данных в случае сбоя.*

### 7
> Каковы типичные причины потери логов при передаче с устройств на сервер сбора? Выбери несколько вариантов ответа.
- [x] Неправильная настройка порта или протокола на устройстве или сервере
- [x] Блокировка трафика брандмауэром или ACL на пути передачи
- [x] Перегрузка сети или сервера сбора логов
- [x] Наличие ошибок в конфигурации rsyslog или syslog-ng

*К потере логов могут привести все эти причины: неверная настройка порта или протокола, блокировка трафика, перегрузка или ошибки конфигурации.* 

### 8
> Как эффективнее всего проверить доступность порта сервера сбора логов?
- [X] Использовать команду telnet <порт>
- [ ] Проверить статус службы rsyslog через systemctl
- [ ] Посмотреть логи системы через journalctl
- [ ] Выполнить команду ping

*Проверить, открыт ли конкретный порт и принимает ли он соединения, позволяет команда telnet. Systemctl проверяет состояние службы, но не тестирует сетевое соединение. Journalctl показывает логи службы, но не тестирует доступность порта. А ping проверяет доступность IP-адреса, но не конкретного порта.* 

### 9
> Какие настройки нужно сделать в rsyslog или syslog-ng, чтобы отправлять логи по защищенному протоколу TLS? Выбери несколько вариантов ответа.
- [X] Включить поддержку TLS в конфигурации сервиса
- [X] Указать сертификаты и ключи для шифрования соединения
- [ ] Отключить все фильтры и маршрутизации
- [X] Настроить правильный порт (обычно 6514 для TLS Syslog)

*Для безопасной передачи логов по TLS нужно включить поддержку шифрования, указать сертификаты и использовать правильный порт. Отключение фильтров не обязательно и не связано с безопасностью.* 

### 10
> Какие инструменты можно использовать для анализа задержек при доставке логов? Выбери несколько вариантов ответа.
- [X] tcpdump
- [X] traceroute
- [X] time
- [X] netcat

*Все эти инструменты помогают диагностировать задержки. Tcpdump отвечает за анализ трафика; traceroute позволяет определить маршрут логов и задержки по пути; time измеряет время выполнения команд; netcat обеспечивает тестовую отправку данных.* 

### 11
> Что нужно сделать при обнаружении пропущенных критических логов в системе сбора? Выбери несколько вариантов ответа.
- [X] Проверить наличие ошибок или сбоев в службе rsyslog / syslog-ng на сервере сбора
- [X] Проверить настройки источников на предмет фильтров или исключений
- [X] Проанализировать сетевой трафик между источниками и сервером сбора
- [X] Почистить таблицу MAC-адресов (кэш ARP)

*Выявить причину пропуска важных логов помогают все перечисленные шаги.* 

### 12
> Какие фильтры используются для обработки логов в syslog-ng? Выбери несколько вариантов ответа.
- [X] По уровню важности (severity)
- [X] По источнику (source)
- [X] По содержимому сообщения (content filtering)
- [ ] По времени суток

*Syslog-ng поддерживает фильтрацию по уровню важности, источнику и содержимому сообщений. Фильтрация по времени суток не является встроенной функцией.* 

